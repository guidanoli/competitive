#!/usr/bin/env bash
#
# Summary: Call subfile
#
# Usage: libexec/subcall FILE {OPTIONS}
#
# Calls FILE for the current language

# Exit on failure
set -e

# Save subfile name
file="$1"
shift

# Get current language
lang="$(libexec/get-lang)"

# Save language directory
langdir="lib/$lang"

# If subfile exists
if [[ -f "$langdir/$file" ]]; then

	# then, push current language directory
	pushd "$langdir" > /dev/null

	# run it and pass any additional options
	"./$file" "$@"

	# and pop directory
	popd > /dev/null
else
	# else, exit
	source libexec/err/3
fi
