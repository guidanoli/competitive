#!/usr/bin/env bash

source tests/framework

# run_helloworld <lang> <program>
run_helloworld() {
	cptk init "$1"
	printf "$2\n" > "$(cptk path)"
	T "cptk run | grep -q 'Hello, World!'" "$1"
}

run_helloworld c '#include <stdio.h>\nint main() { printf("Hello, World!\\n"); }'
run_helloworld cpp '#include <iostream>\nint main() { std::cout << "Hello, World!" << std::endl; }'
run_helloworld cs 'class Hello { static void Main(string[] args) { System.Console.WriteLine("Hello, World!"); } }'
run_helloworld go 'package main\nimport "fmt"\nfunc main() { fmt.Println("Hello, World!") }'
run_helloworld haskell 'main = putStrLn "Hello, World!"'
run_helloworld java 'class Main { public static void main(String[] args) { System.out.println("Hello, World!"); } }'
run_helloworld js 'console.log("Hello, World!");'
run_helloworld kotlin 'fun main() { println("Hello, World!") }'
run_helloworld pascal "program Hello; begin writeln ('Hello, World!'); end."
run_helloworld perl 'print("Hello, World!\n");'
run_helloworld python 'print("Hello, World!")'
run_helloworld ruby 'puts "Hello, World!"'
