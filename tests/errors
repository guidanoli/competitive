#!/usr/bin/env bash

set -e

assert_true() {
	if eval "$1" > /dev/null 2>&1; then
		echo "[ PASS ] $1"
	else
		echo "[ FAIL ] $1"
		exit 1
	fi 
}

assert_false() {
	if ! eval "$1" > /dev/null 2>&1; then
		echo "[ PASS ] $1"
	else
		echo "[ FAIL ] $1"
		exit 1
	fi 
}

rm -f etc/lang # No language specified
echo "(No language set)"

assert_false 'cptk clear'
assert_false 'cptk debug'
assert_false 'cptk path'
assert_false 'cptk run'

assert_true 'cptk init c'
touch `cptk path`

echo "(With language set)"

assert_true 'cptk clear'
assert_false 'cptk debug'
assert_false 'cptk run'

assert_false 'cptk ""'
assert_false 'cptk .'
assert_false 'cptk ..'
assert_false 'cptk base'

assert_false 'cptk init unexistent_language'
assert_false 'cptk init'
assert_false 'cptk init ""'
assert_false 'cptk init .'
assert_false 'cptk init ..'
assert_false 'cptk init lib'
